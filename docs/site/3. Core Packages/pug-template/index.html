
<!DOCTYPE html>
<html class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-1.5.4">
    
    
      
        <title> Pug Template - Flamingo</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-56ade86843.js"></script>
      <script src="../../assets/javascripts/jquery.min.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-b1a1975878.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../stylesheets/ci.css">
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="../../index.html" title="Flamingo" class="md-logo md-header-nav__button">
            <img src="../../assets/flamingo-icon.png" height="25">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  3. Core Packages
                </span>
              
            
            Pug Template
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <div class="md-search__overlay"></div>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source">
          
        </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-logo md-nav__button">
        <img src="../../assets/flamingo-icon.png">
      </i>
    
    Flamingo
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../index.html" title="Flamingo Documentation" class="md-nav__link">
      Flamingo Documentation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      0. Introduction
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        0. Introduction
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../0. Introduction/1. Getting Started/index.html" title="Getting started with Flamingo" class="md-nav__link">
      Getting started with Flamingo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../0. Introduction/2. Tutorial Hello World/index.html" title="Hello World Flamingo" class="md-nav__link">
      Hello World Flamingo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../0. Introduction/3. Tutorial Frontend Templating/index.html" title="Flamingo Frontend Development" class="md-nav__link">
      Flamingo Frontend Development
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      1. Developing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        1. Developing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../1. Developing/1_Structure/index.html" title="Flamingo Project Structure" class="md-nav__link">
      Flamingo Project Structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../1. Developing/2_Ports and Adapters/index.html" title="2 Ports and Adapters" class="md-nav__link">
      2 Ports and Adapters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../1. Developing/4_Testing/index.html" title="Testing" class="md-nav__link">
      Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../1. Developing/5_Test and Mock external services/index.html" title="Testing and Mocking external Services" class="md-nav__link">
      Testing and Mocking external Services
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      2. Framework Features
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        2. Framework Features
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../2. Framework Features/configuration concept/index.html" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2. Framework Features/dependency-injection/index.html" title="Dingo Dependency Injection" class="md-nav__link">
      Dingo Dependency Injection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2. Framework Features/events/index.html" title="Events" class="md-nav__link">
      Events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2. Framework Features/flaming_vs_idiomatic_go/index.html" title="Flaming vs. Idiomatic Go" class="md-nav__link">
      Flaming vs. Idiomatic Go
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2. Framework Features/routing/index.html" title="Routing" class="md-nav__link">
      Routing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2. Framework Features/sessions/index.html" title="Sessions" class="md-nav__link">
      Sessions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      3. Core Packages
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        3. Core Packages
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Pug Template
      </label>
    
    <a href="index.html" title="Pug Template" class="md-nav__link md-nav__link--active">
      Pug Template
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pugjs" title="pug.js" class="md-nav__link">
    pug.js
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flamingo-pug-template" title="Flamingo Pug Template" class="md-nav__link">
    Flamingo Pug Template
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dynamic-javascript" title="Dynamic JavaScript" class="md-nav__link">
    Dynamic JavaScript
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported-javascript" title="Supported JavaScript" class="md-nav__link">
    Supported JavaScript
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#standard-datatypes" title="Standard Datatypes" class="md-nav__link">
    Standard Datatypes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#support-pug" title="Support Pug" class="md-nav__link">
    Support Pug
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#interpolation" title="Interpolation" class="md-nav__link">
    Interpolation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mixins" title="Mixins" class="md-nav__link">
    Mixins
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loops" title="Loops" class="md-nav__link">
    Loops
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debugging" title="Debugging" class="md-nav__link">
    Debugging
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      4. Others
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        4. Others
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../4. Others/FAQ/index.html" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pugjs" title="pug.js" class="md-nav__link">
    pug.js
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flamingo-pug-template" title="Flamingo Pug Template" class="md-nav__link">
    Flamingo Pug Template
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dynamic-javascript" title="Dynamic JavaScript" class="md-nav__link">
    Dynamic JavaScript
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported-javascript" title="Supported JavaScript" class="md-nav__link">
    Supported JavaScript
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#standard-datatypes" title="Standard Datatypes" class="md-nav__link">
    Standard Datatypes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#support-pug" title="Support Pug" class="md-nav__link">
    Support Pug
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#interpolation" title="Interpolation" class="md-nav__link">
    Interpolation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mixins" title="Mixins" class="md-nav__link">
    Mixins
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loops" title="Loops" class="md-nav__link">
    Loops
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debugging" title="Debugging" class="md-nav__link">
    Debugging
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="pug-template">Pug Template<a class="headerlink" href="#pug-template" title="Permanent link">&para;</a></h1>
<h2 id="pugjs">pug.js<a class="headerlink" href="#pugjs" title="Permanent link">&para;</a></h2>
<p><a href="https://pugjs.org/api/getting-started.html">Pug</a> is a JavaScript template rendering engine.</p>
<h2 id="flamingo-pug-template">Flamingo Pug Template<a class="headerlink" href="#flamingo-pug-template" title="Permanent link">&para;</a></h2>
<p>The Flamingo <code>core/pug_template</code> package is a flamingo template module to use pug.js templates.</p>
<p>Basically pug.js is by default compiled to JavaScript, and executed as HTML.</p>
<p>This mechanism is used to render static prototypes for the templates, so the usual HTML prototype is
just a natural artifact of this templating, instead of an extra workflow step or custom tool.</p>
<p>This allows frontend developers to start templating very early with very few backend supports,
yet without the need to rewrite everything or even learn a new template language.</p>
<p>Also the static prototype can be used to test/analyze the UI in early project phases, while the backend
might not be done yet.</p>
<p>The way pug.js works is essentially this:</p>
<pre><code>template -[tokenizer]-&gt; tokens -[parser]-&gt; AST -[compiler]-&gt; JavaScript -[runtime]-&gt; HTML
</code></pre>

<p>To integrate this with Flamingo we save the AST (Abstract syntax tree) in a json representation.
pug_template will use a parser to build an internal in-memory tree of the concrete building
blocks, and then use a render to transform these blocks into actual go template with HTML.</p>
<pre><code>AST -[parser]-&gt; Block tree -[render]-&gt; go template -[go-template-runtime]-&gt; HTML
</code></pre>

<p>(You can also view the intermediate result https://flamingoURL/_pugtpl/debug?tpl=home/home)</p>
<p>One of the features of pug.js is the posibility to use arbitrary JavaScript in case the template syntax
does not provide the correct funtions. This is used for example in loops like</p>
<pre><code class="jade">ul
  each val, index in ['zero', 'one', 'two']
    li= index + ': ' + val
</code></pre>

<p>The term <code>['zero', 'one', 'two']</code> is actual JavaScript, and a developer is able to use more advanced
code like</p>
<pre><code class="jade">- prefix = 'foo'
ul
  each val, index in [prefix+'zero', prefix+'one', prefix+'two']
    li= index + ': ' + val
</code></pre>

<p>The pug_template module takes this JavaScript and uses the go-bases JS engine otto to parse the JavaScript
and transpile it into actual go code.
While this works for some standard statements and language constructs (default datatypes such as maps, list, etc),
this does not support certain things such as OOP or the JS stdlib.</p>
<p>It is, however, possible to recreate such functionality in a third-party module via Flamingo's template functions.
For example pug_template itself has a substitute for the JavaScript <code>Math</code> library with the <code>min</code>, <code>max</code> and <code>ceil</code>
functions. Please note that these function have to use reflection and it's up to the implementation to properly
reflect the functionality and handle different inputs correctly.</p>
<p>After all extensive usage of JavaScript is not advised.</p>
<h2 id="dynamic-javascript">Dynamic JavaScript<a class="headerlink" href="#dynamic-javascript" title="Permanent link">&para;</a></h2>
<p>The Pug Template engine compiles a subset of JavaScript (ES2015) to Go templates.
This allows frontend developers to use known workflows and techniques, instead of learning
a complete new template engine.</p>
<p>To make this possible Flamingo rewrites the JavaScript to go, on the fly.</p>
<h2 id="supported-javascript">Supported JavaScript<a class="headerlink" href="#supported-javascript" title="Permanent link">&para;</a></h2>
<h3 id="standard-datatypes">Standard Datatypes<a class="headerlink" href="#standard-datatypes" title="Permanent link">&para;</a></h3>
<pre><code class="javascript">{&quot;key&quot;: &quot;value&quot;}

&quot;string&quot; + &quot;another string&quot;

1 + 2

15 * 8

[1, 2, 3, 4, 5]
</code></pre>

<h2 id="support-pug">Support Pug<a class="headerlink" href="#support-pug" title="Permanent link">&para;</a></h2>
<h3 id="interpolation">Interpolation<a class="headerlink" href="#interpolation" title="Permanent link">&para;</a></h3>
<pre><code class="pug">p Text #{variable} something #{1 + 2}
</code></pre>

<h3 id="mixins">Mixins<a class="headerlink" href="#mixins" title="Permanent link">&para;</a></h3>
<pre><code class="pug">mixin mymixin(arg1, arg2=&quot;default)
  p.something(id=arg2)= arg1

+mymixing(&quot;foo&quot;)

+mymixin(&quot;foo&quot;, &quot;bar&quot;)
</code></pre>

<h3 id="loops">Loops<a class="headerlink" href="#loops" title="Permanent link">&para;</a></h3>
<pre><code class="pug">each value, index in  [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]
  p value #{value} at #{index}
</code></pre>

<h2 id="debugging">Debugging<a class="headerlink" href="#debugging" title="Permanent link">&para;</a></h2>
<p>Templates can be debugged via <code>/_pugtpl/debug?tpl=pages/product/view</code></p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../2. Framework Features/sessions/index.html" title="Sessions" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Sessions
              </span>
            </div>
          </a>
        
        
          <a href="../../4. Others/FAQ/index.html" title="FAQ" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                FAQ
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Flamingo
         | <a href="https://www.aoe.com/om3" title="OM3">OM3</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-0b7df094bf.js"></script>
      <script>app.initialize({url:{base:"../.."}})</script>
      
        <script src="../../search/require.js"></script>
      
        <script src="../../search/search.js"></script>
      
    
    
      
    
  </body>
</html>